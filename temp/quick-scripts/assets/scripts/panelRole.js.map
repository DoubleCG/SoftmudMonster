{"version":3,"sources":["panelRole.js"],"names":["UserDataManager","require","cc","Class","extends","Component","properties","canAttrAudio","default","type","AudioClip","cannotAttrAudio","surValue","Label","attrJumpDurationValue","attrAccelValue","onLoad","roleArg","getRoleArg","updatePlayerAttr","start","string","sur","jumpDuration","accel","canAddAttr","canSubAttr","maxArgNum","playAttrAudio","bool","audioEngine","playEffect","addPlayerJumpDuration","subPlayerJumpDuration","addPlayerAccel","subPlayerAccel","open","node","active","close","setRoleArg"],"mappings":"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","file":"panelRole.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["let UserDataManager = require(\"UserDataManager\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        canAttrAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        cannotAttrAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n\r\n        surValue: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        attrJumpDurationValue: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        attrAccelValue: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n    },\r\n\r\n    onLoad() {\r\n        this.roleArg = UserDataManager.getRoleArg();\r\n        this.updatePlayerAttr();\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    updatePlayerAttr() {\r\n        this.surValue.string = '剩余点数：' + this.roleArg.sur;\r\n        this.attrJumpDurationValue.string = this.roleArg.jumpDuration;\r\n        this.attrAccelValue.string = this.roleArg.accel;\r\n    },\r\n    canAddAttr() {\r\n        if (this.roleArg.sur === 0) {\r\n            return false;\r\n        } else {\r\n            this.roleArg.sur--;\r\n            return true;\r\n        }\r\n    },\r\n    canSubAttr() {\r\n        if (this.roleArg.sur > this.roleArg.maxArgNum - 1) {\r\n            return false;\r\n        } else {\r\n            this.roleArg.sur++;\r\n            return true;\r\n        }\r\n    },\r\n    playAttrAudio(bool) {\r\n        cc.audioEngine.playEffect(this[bool ? 'canAttrAudio' : 'cannotAttrAudio'], false);\r\n        return bool;\r\n    },\r\n\r\n    addPlayerJumpDuration() {\r\n        if (this.playAttrAudio(this.roleArg.jumpDuration < 20 && this.canAddAttr())) {\r\n            this.roleArg.jumpDuration++;\r\n            this.updatePlayerAttr();\r\n        }\r\n    },\r\n    subPlayerJumpDuration() {\r\n        if (this.playAttrAudio(this.roleArg.jumpDuration > 0 && this.canSubAttr())) {\r\n            this.roleArg.jumpDuration--;\r\n            this.updatePlayerAttr();\r\n        }\r\n    },\r\n    addPlayerAccel() {\r\n        if (this.playAttrAudio(this.roleArg.accel < 20 && this.canAddAttr())) {\r\n            this.roleArg.accel++;\r\n            this.updatePlayerAttr();\r\n        }\r\n    },\r\n    subPlayerAccel() {\r\n        if (this.playAttrAudio(this.roleArg.accel > 0 && this.canSubAttr())) {\r\n            this.roleArg.accel--;\r\n            this.updatePlayerAttr();\r\n        }\r\n    },\r\n\r\n\r\n    open() {\r\n        this.node.active = true;\r\n    },\r\n\r\n    close() {\r\n        this.node.active = false;\r\n        UserDataManager.setRoleArg(this.roleArg);\r\n    }\r\n});\r\n"]}