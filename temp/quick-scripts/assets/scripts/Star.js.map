{"version":3,"sources":["Star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","onLoad","enabled","init","_main","node","opacity","onPicked","pos","getPosition","gainScore","despawnStar","player","getComponent","upgrade","gameUpgrade","getPlayerDistance","playerPos","dist","position","sub","mag","update","dt","Math","floor","timer","starsDuration"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAY;AADJ,KAHP;;AAOLC,UAPK,oBAOI;AACL,aAAKC,OAAL,GAAe,KAAf;AACH,KATI;AAWLC,QAXK,gBAWAC,KAXA,EAWO;AACR,aAAKA,KAAL,GAAaA,KAAb;AACA,aAAKF,OAAL,GAAe,IAAf;AACA,aAAKG,IAAL,CAAUC,OAAV,GAAoB,GAApB;AACH,KAfI;AAiBLC,YAjBK,sBAiBM;AACP,YAAIC,MAAM,KAAKH,IAAL,CAAUI,WAAV,EAAV;AACA,aAAKL,KAAL,CAAWM,SAAX,CAAqBF,GAArB;AACA,aAAKJ,KAAL,CAAWO,WAAX,CAAuB,KAAKN,IAA5B;AACA,aAAKD,KAAL,CAAWQ,MAAX,CAAkBC,YAAlB,CAA+B,QAA/B,EAAyCC,OAAzC;AACA,aAAKV,KAAL,CAAWW,WAAX;AACH,KAvBI;AAwBLC,qBAxBK,+BAwBe;AAChB,YAAIC,YAAY,KAAKb,KAAL,CAAWQ,MAAX,CAAkBH,WAAlB,EAAhB;AACA,YAAIS,OAAO,KAAKb,IAAL,CAAUc,QAAV,CAAmBC,GAAnB,CAAuBH,SAAvB,EAAkCI,GAAlC,EAAX;AACA,eAAOH,IAAP;AACH,KA5BI;AA6BLI,UA7BK,kBA6BEC,EA7BF,EA6BM;AACP,YAAI,KAAKP,iBAAL,KAA2B,KAAKhB,UAApC,EAAgD;AAC5C,iBAAKO,QAAL;AACA;AACH;;AAED,aAAKF,IAAL,CAAUC,OAAV,GAAoB,MAAMkB,KAAKC,KAAL,CAAW,CAAC,IAAI,KAAKrB,KAAL,CAAWsB,KAAX,GAAiB,KAAKtB,KAAL,CAAWuB,aAAjC,IAAkD,GAA7D,CAA1B;AACH;AApCI,CAAT","file":"Star.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    \n    properties: {\n        pickRadius: 70,\n    },\n\n    onLoad() {\n        this.enabled = false;\n    },\n\n    init(_main) {\n        this._main = _main;\n        this.enabled = true;\n        this.node.opacity = 255;\n    },\n\n    onPicked() {\n        var pos = this.node.getPosition();\n        this._main.gainScore(pos);\n        this._main.despawnStar(this.node);\n        this._main.player.getComponent('Player').upgrade();\n        this._main.gameUpgrade();\n    },\n    getPlayerDistance() {\n        var playerPos = this._main.player.getPosition();\n        var dist = this.node.position.sub(playerPos).mag();\n        return dist;\n    },\n    update(dt) {\n        if (this.getPlayerDistance() < this.pickRadius) {\n            this.onPicked();\n            return;\n        }\n        \n        this.node.opacity = 100 + Math.floor((1 - this._main.timer/this._main.starsDuration) * 155);\n    },\n});\n"]}