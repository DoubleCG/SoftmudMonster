{"version":3,"sources":["Star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","onLoad","enabled","init","game","node","opacity","reuse","onPicked","pos","getPosition","gainScore","despawnStar","player","getComponent","upgrade","gameUpgrade","getPlayerDistance","playerPos","dist","position","sub","mag","update","dt","opacityRatio","timer","starDuration","minOpacity","Math","floor"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAY;AADJ,KAHP;;AAOLC,UAPK,oBAOI;AACL,aAAKC,OAAL,GAAe,KAAf;AACH,KATI;AAWLC,QAXK,gBAWAC,IAXA,EAWM;AACP,aAAKA,IAAL,GAAYA,IAAZ;AACA,aAAKF,OAAL,GAAe,IAAf;AACA,aAAKG,IAAL,CAAUC,OAAV,GAAoB,GAApB;AACH,KAfI;AAiBLC,SAjBK,iBAiBEH,IAjBF,EAiBQ;AACT,aAAKD,IAAL,CAAUC,IAAV;AACH,KAnBI;AAqBLI,YArBK,sBAqBM;AACP,YAAIC,MAAM,KAAKJ,IAAL,CAAUK,WAAV,EAAV;AACA,aAAKN,IAAL,CAAUO,SAAV,CAAoBF,GAApB;AACA,aAAKL,IAAL,CAAUQ,WAAV,CAAsB,KAAKP,IAA3B;AACA,aAAKD,IAAL,CAAUS,MAAV,CAAiBC,YAAjB,CAA8B,QAA9B,EAAwCC,OAAxC;AACA,aAAKX,IAAL,CAAUY,WAAV;AACH,KA3BI;AA4BLC,qBA5BK,+BA4Be;AAChB,YAAIC,YAAY,KAAKd,IAAL,CAAUS,MAAV,CAAiBH,WAAjB,EAAhB;AACA,YAAIS,OAAO,KAAKd,IAAL,CAAUe,QAAV,CAAmBC,GAAnB,CAAuBH,SAAvB,EAAkCI,GAAlC,EAAX;AACA,eAAOH,IAAP;AACH,KAhCI;AAiCLI,UAjCK,kBAiCEC,EAjCF,EAiCM;AACP,YAAI,KAAKP,iBAAL,KAA2B,KAAKjB,UAApC,EAAgD;AAC5C,iBAAKQ,QAAL;AACA;AACH;;AAED,YAAIiB,eAAe,IAAI,KAAKrB,IAAL,CAAUsB,KAAV,GAAgB,KAAKtB,IAAL,CAAUuB,YAAjD;AACA,YAAIC,aAAa,EAAjB;AACA,aAAKvB,IAAL,CAAUC,OAAV,GAAoBsB,aAAaC,KAAKC,KAAL,CAAWL,gBAAgB,MAAMG,UAAtB,CAAX,CAAjC;AACH;AA1CI,CAAT","file":"Star.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    \n    properties: {\n        pickRadius: 70,\n    },\n\n    onLoad() {\n        this.enabled = false;\n    },\n\n    init(game) {\n        this.game = game;\n        this.enabled = true;\n        this.node.opacity = 255;\n    },\n\n    reuse (game) {\n        this.init(game);\n    },\n\n    onPicked() {\n        var pos = this.node.getPosition();\n        this.game.gainScore(pos);\n        this.game.despawnStar(this.node);\n        this.game.player.getComponent('Player').upgrade();\n        this.game.gameUpgrade();\n    },\n    getPlayerDistance() {\n        var playerPos = this.game.player.getPosition();\n        var dist = this.node.position.sub(playerPos).mag();\n        return dist;\n    },\n    update(dt) {\n        if (this.getPlayerDistance() < this.pickRadius) {\n            this.onPicked();\n            return;\n        }\n        \n        var opacityRatio = 1 - this.game.timer/this.game.starDuration;\n        var minOpacity = 50;\n        this.node.opacity = minOpacity + Math.floor(opacityRatio * (255 - minOpacity));\n    },\n});\n"]}