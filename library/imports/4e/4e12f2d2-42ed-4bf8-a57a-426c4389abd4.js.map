{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Game.js"],"names":["UserDataManager","require","cc","Class","extends","Component","properties","bgm","default","type","AudioClip","farCameraAudio","scoreAudio","gameWinAudio","gameOverAudio","bg","Node","title","gameTimer","Label","gameCamera","Camera","starNumber","currentStarNumber","currentStars","mostHit","starPrefab","Prefab","redStarPrefab","scoreFXPrefab","rankList","ground","player","twiceJumpGetScore","scoreKeeper","scoreDisplay","menuNode","gameOverNode","youWinNode","controlHintLabel","keyboardHint","multiline","touchHint","winScoreLabel","onLoad","loadData","audioEngine","playEffect","redStar","timeKeeper","menuToFirstPanel","iniBg","groundY","y","height","currentStarX","enabled","string","sys","isMobile","starPool","NodePool","scorePool","startGame","active","initGame","startGameTimer","resetScore","getComponent","startMoveAt","spawnNewStar","spawnRedStar","iniStarDuration","starDuration","gameLevel","cameraFarSpeed","starMoreSpeed","time","score","zoomRatio","menuHideAll","c","children","i","menuToShop","menuToGuide","menuToRank","axios","get","then","console","log","response","data","catch","error","menuToAbout","bgNumber","bgIndex","Math","floor","random","loader","loadRes","SpriteFrame","err","spriteFrame","addComponent","Sprite","setInterval","toFixed","bind","stopGameTimer","clearInterval","instantiate","node","addChild","destY","startY","jumpHeight","startX","width","setPosition","v2","init","yDistance","runAction","moveBy","roadWidth","totalTime","speed","sequence","moveTo","callFunc","repeatForever","newStar","size","randY","randX","startTimer","push","despawnStar","star","put","timer","gainScore","pos","fx","spawnScoreFX","theScoreShow","_components","_string","play","despawnScoreFX","scoreFX","gameUpgrade","farBg","scaleBy","update","dt","gameOver","gameWin","finalScore","pow","again","sendScore","stopMove","clear","destroy"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["let UserDataManager = require(\"UserDataManager\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        bgm: {\n            default: null,\n            type: cc.AudioClip\n        },\n        farCameraAudio: {\n            default: null,\n            type: cc.AudioClip\n        },\n        scoreAudio: {\n            default: null,\n            type: cc.AudioClip\n        },\n        gameWinAudio: {\n            default: null,\n            type: cc.AudioClip\n        },\n        gameOverAudio: {\n            default: null,\n            type: cc.AudioClip\n        },\n\n\n        bg: cc.Node,\n        title: cc.Node,\n        gameTimer: cc.Label,\n        gameCamera: cc.Camera,\n        starNumber: 1,\n        currentStarNumber: 1,\n        currentStars: [],\n        mostHit: 0,\n\n        starPrefab: cc.Prefab,\n        redStarPrefab: cc.Prefab,\n        scoreFXPrefab: cc.Prefab,\n        rankList: cc.Label,\n        ground: cc.Node,\n        player: cc.Node,\n        twiceJumpGetScore: 0,\n        scoreKeeper: 1,\n        scoreDisplay: cc.Label,\n\n        menuNode: cc.Node,\n        gameOverNode: cc.Node,\n        youWinNode: cc.Node,\n        controlHintLabel: cc.Label,\n        keyboardHint: {\n            default: '',\n            multiline: true\n        },\n        touchHint: {\n            default: '',\n            multiline: true\n        },\n        winScoreLabel: cc.Label,\n\n    },\n\n    onLoad() {\n        UserDataManager.loadData();\n\n        cc.audioEngine.playEffect(this.bgm, true);\n\n        this.redStar = null;\n        this.timeKeeper = null;\n\n        this.menuToFirstPanel();\n        this.iniBg();\n\n        this.groundY = this.ground.y + this.ground.height / 2 - 10;\n\n        this.currentStarX = 0;\n\n        this.enabled = false;\n\n        this.controlHintLabel.string = \"操作说明：\\n\" + (cc.sys.isMobile ? this.touchHint : this.keyboardHint);\n        this.starPool = new cc.NodePool('Star');\n        this.scorePool = new cc.NodePool('ScoreFX');\n    },\n\n    startGame() {\n        this.title.active = false;\n        this.initGame();\n        this.iniBg();\n        this.startGameTimer();\n        this.resetScore();\n        this.enabled = true;\n        this.menuNode.active = false;\n        this.gameOverNode.active = false;\n        this.youWinNode.active = false;\n        this.player.getComponent('Player').startMoveAt(0, this.groundY);\n\n        this.spawnNewStar();\n        this.spawnRedStar();\n    },\n    initGame() {\n        this.iniStarDuration = 6;\n        this.starDuration = 0;\n        this.gameLevel = 0;\n        this.cameraFarSpeed = 10;  // 拉远镜头频率\n        this.starMoreSpeed = 30;   // 星星增加频率\n        this.time = 0;\n        this.score = 0;\n        this.scoreKeeper = 1,\n            this.currentStarNumber = 1;\n        this.mostHit = 0;\n        this.starNumber = 1;\n        this.gameCamera.zoomRatio = 1;\n    },\n    // 关于菜单部分\n    menuHideAll() {\n        let c = this.menuNode.children;\n        for (let i of c) i.active = false;\n        return c;\n    },\n    menuToFirstPanel() {\n        let c = this.menuHideAll();\n        c[0].active = true;\n    },\n    // menuToAttribute() {\n    //     let c = this.menuHideAll();\n    //     c[1].active = true;\n    // },\n    menuToShop() {\n        let c = this.menuHideAll();\n        c[2].active = true;\n    },\n    menuToGuide() {\n        let c = this.menuHideAll();\n        c[3].active = true;\n    },\n    menuToRank() {\n        let c = this.menuHideAll();\n        c[4].active = true;\n        axios.get('/ranklist')\n            .then(response => {\n                console.log(response);\n                this.rankList.string = response.data;\n            })\n            .catch(error => {\n                console.log(error)\n            })\n    },\n    menuToAbout() {\n        let c = this.menuHideAll();\n        c[5].active = true;\n    },\n\n\n    iniBg() {\n        let bgNumber = 1;\n        let bgIndex = Math.floor(Math.random() * bgNumber);\n        cc.loader.loadRes(\"bgs/\" + bgIndex, cc.SpriteFrame, (err, spriteFrame) => {\n            if (err) console.error(err);\n            this.bg.addComponent(cc.Sprite).spriteFrame = spriteFrame;\n        });\n\n    },\n\n    startGameTimer() {\n        this.timeKeeper = setInterval(function () {\n            this.time += 0.01;\n            this.gameTimer.string = \"Time: \" + this.time.toFixed(2);\n        }.bind(this), 10);\n    },\n    stopGameTimer() {\n        clearInterval(this.timeKeeper);\n    },\n\n    spawnRedStar() {\n        this.redStar = cc.instantiate(this.redStarPrefab);\n        this.node.addChild(this.redStar);\n\n        let destY = this.node.height / 2 - this.redStar.height / 2;\n        let startY = this.groundY + this.player.getComponent('Player').jumpHeight + 150;\n        let startX = (Math.random() - 0.5) * 0.9 * this.node.width;\n        this.redStar.setPosition(cc.v2(startX, startY));\n        this.redStar.getComponent('RedStar').init(this);\n\n        let yDistance = destY - startY;\n        this.redStar.runAction(cc.moveBy(yDistance * 0.6, 0, destY));\n\n\n        let roadWidth = this.node.width * 0.9;\n        let totalTime = 20;\n        let speed = roadWidth / totalTime;\n        let time = (roadWidth / 2 - startX) / speed;\n        this.redStar.runAction(cc.sequence(\n            cc.moveTo(time, roadWidth * 0.45, 0),\n            cc.callFunc(()=>{\n                this.redStar.runAction(\n                    cc.repeatForever(cc.sequence(\n                        cc.moveTo(totalTime, -roadWidth * 0.45, 0),\n                        cc.moveTo(totalTime, roadWidth * 0.45, 0)\n                    ))\n                )\n            })\n        ));\n    },\n\n    spawnNewStar() {\n        var newStar = null;\n        if (this.starPool.size() > 0) {\n            newStar = this.starPool.get(this);\n            console.log(\"Game-spawnNewStart form startPool\");\n        } else {\n            newStar = cc.instantiate(this.starPrefab);\n        }\n\n        this.node.addChild(newStar);\n        var randY = this.groundY + Math.random() * this.player.getComponent('Player').jumpHeight + 30;\n        var randX = (Math.random() - 0.5) * 0.9 * this.node.width;\n        let v2 = cc.v2(randX, randY);\n        newStar.setPosition(v2);\n\n        newStar.getComponent('Star').init(this);\n\n        this.startTimer();\n        this.currentStars.push(newStar);\n    },\n\n    despawnStar(star) {\n        this.starPool.put(star);\n        this.currentStarNumber--;\n        if (this.currentStarNumber === 0) {\n            for (let i = 0; i < this.starNumber; i++) {\n                this.spawnNewStar();\n            }\n            this.currentStarNumber = this.starNumber;\n        }\n    },\n\n    startTimer() {\n        this.starDuration = this.iniStarDuration - this.gameLevel / 150;\n        this.timer = 0;\n    },\n\n\n\n\n    gainScore(pos) {\n        this.score += this.scoreKeeper;\n        if (this.scoreKeeper > this.mostHit) {\n            this.mostHit = this.scoreKeeper;\n        }\n        this.scoreDisplay.string = 'Score: ' + this.score;\n        this.twiceJumpGetScore = 2;\n\n        var fx = this.spawnScoreFX();\n        var theScoreShow = fx.node.children[0].children[1]._components[0];\n        theScoreShow._string = \"+\" + this.scoreKeeper;\n        this.node.addChild(fx.node);\n        fx.node.setPosition(pos);\n        fx.play();\n\n        cc.audioEngine.playEffect(this.scoreAudio, false);\n        this.scoreKeeper++;\n    },\n    resetScore() {\n        this.score = 0;\n        this.scoreDisplay.string = 'Score: ' + this.score;\n    },\n\n    spawnScoreFX() {\n        var fx;\n        fx = cc.instantiate(this.scoreFXPrefab).getComponent('ScoreFX');\n        fx.init(this);\n        return fx;\n    },\n\n    despawnScoreFX(scoreFX) {\n        this.scorePool.put(scoreFX);\n    },\n\n    gameUpgrade() {\n        this.gameLevel++;\n        if (this.gameLevel % this.cameraFarSpeed === 0) {\n            this.farBg();\n        }\n        if (this.gameLevel < 21 && this.gameLevel % 10 === 0) {\n            this.starNumber++;\n        }\n        if (this.gameLevel % this.starMoreSpeed === 0) {\n            this.starNumber++;\n            this.iniStarDuration += 0.7;\n        }\n    },\n\n    farBg() {\n        this.bg.runAction(cc.scaleBy(0.5, 0.99));\n        cc.audioEngine.playEffect(this.farCameraAudio, false);\n    },\n\n    update(dt) {\n        if (this.timer > this.starDuration) {\n            this.gameOver();\n            this.enabled = false;\n            return;\n        }\n        this.timer += dt;\n    },\n\n    gameWin() {\n        this.finalScore = (Math.pow((300 / this.time.toFixed(2)), 2).toFixed(2) * this.score).toFixed(0);\n        this.winScoreLabel.string = 'Final Score: ' + this.finalScore + '\\n' + \"Most Hit: \" + this.mostHit;\n\n        this.youWinNode.active = true;\n        this.again();\n        cc.audioEngine.playEffect(this.gameWinAudio, false);\n    },\n\n    gameOver() {\n        this.gameOverNode.active = true;\n        this.again();\n        cc.audioEngine.playEffect(this.gameOverAudio, false);\n    },\n\n    again() {\n        this.sendScore();\n        this.player.getComponent('Player').stopMove();\n        this.stopGameTimer();\n        this.menuNode.active = true;\n        this.enabled = false;\n        this.starPool.clear();\n        this.redStar.destroy();\n        for (let i of this.currentStars) {\n            i.destroy();\n        }\n        this.currentStars = [];\n    },\n    sendScore() {\n        console.log(\"Game-sendScore\");\n    }\n\n});"]}