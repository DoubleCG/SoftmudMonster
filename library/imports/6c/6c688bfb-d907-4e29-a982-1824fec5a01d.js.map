{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Player.js"],"names":["UserDataManager","require","AudioManager","Main","cc","Class","extends","Component","properties","controller","default","type","Node","mobileController","money","Label","jumpActionArray","jumpInterval","jumpStyleIndex","jumpStyles","jumpStylesLength","jumpStyleDisplay","onLoad","enabled","minPosX","node","parent","width","maxPosX","getJumpStyles","length","initInput","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","document","body","clientWidth","active","startMoveAt","x","y","roleArg","getRoleArg","canTurn","firstJump","xSpeed","accDir","Math","random","initAttr","readyJump","setPosition","height","jumpHeight","rotation","jumpDuration","accel","squashDuration","maxXSpeed","upgrade","r","styleKeys","styleValues","readyTime","runAction","sequence","scaleTo","callFunc","scale","jumping","setTimeout","console","log","jumpUp","moveBy","v2","easing","jumpDown","squash","stretch","scaleBack","callback","playJumpSound","repeat","_main","getComponent","twiceJumpGetScore","scoreKeeper","ceil","instance","play","stopMove","stopAllActions","clearInterval","event","keyCode","macro","KEY","w","switchJumpStyle","s","turnXSpeed","a","speedBounce","turnAcc","rotateBy","string","onDestroy","off","update","dt","abs","opacity","floor","timer","starsDuration"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["let UserDataManager = require(\"UserDataManager\");\nlet AudioManager = require(\"AudioManager\");\nlet Main = require(\"Main\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        controller: {\n            default: null,\n            type: cc.Node\n        },\n        mobileController: {\n            default: null,\n            type: cc.Node\n        },\n        money: {\n            default: null,\n            type: cc.Label\n        },\n\n\n        jumpActionArray: [],\n\n        jumpInterval: null,\n        jumpStyleIndex: 0,\n\n        jumpStyles: null,\n        jumpStylesLength: 0,\n        jumpStyleDisplay: {\n            default: null,\n            type: cc.Label\n        },\n    },\n\n    onLoad() {\n        this.enabled = false;\n        this.minPosX = -this.node.parent.width / 2;\n        this.maxPosX = this.node.parent.width / 2;\n\n        this.jumpStyles = this.getJumpStyles();\n        this.jumpStylesLength = this.jumpStyles.length;\n\n        this.initInput();\n    },\n\n    initInput() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n\n        if (document.body.clientWidth < 960) {\n            this.mobileController.active = true;\n        } else {\n            this.mobileController.active = false;\n        }\n    },\n    startMoveAt(x, y) {\n        this.roleArg = UserDataManager.getRoleArg();\n        this.canTurn = true;\n        // this.enabled = true;\n        this.firstJump = true;\n        this.xSpeed = 0;\n        this.accDir = Math.random() > 0.5 ? 0 : 1;\n        this.initAttr();\n        this.readyJump();\n        this.node.setPosition(x, y + this.node.height / 2);\n    },\n    initAttr() {\n        this.jumpHeight = 110; // 主角跳跃高度\n        this.node.rotation = 0;\n\n        this.jumpDuration = 0.3 + this.roleArg.jumpDuration / 200;  // 主角跳跃持续时间\n        this.accel = 150 + this.roleArg.accel * 5; // 加速度\n\n        this.squashDuration = 0.03; // 辅助形变动作时间\n        this.maxXSpeed = 2000; // 最大移动速度\n    },\n    upgrade() {\n        this.jumpHeight += 0.7;\n        this.jumpDuration += 0.00003 * (10 + this.roleArg.jumpDuration);\n        this.accel += (10 + this.roleArg.accel) / 20;\n    },\n\n    getJumpStyles(r) {\n\n        let styleKeys = [\n            // '起跳'\n            '正常',\n            '漂浮',\n            // '弹簧',\n            // '震动',\n            // '二段',\n            '轻功',\n            '滞空'\n            // '悬空',\n            // '和谐',\n\n        ];\n        let styleValues = [\n            // ['easeExponentialOut','easeExponentialIn'] //起跳\n            ['easeCubicActionOut', 'easeCubicActionIn']  //正常\n            , ['easeSineOut', 'easeSineIn'] //漂浮\n            // ,['easeElasticOut','easeElasticIn'] //弹簧\n            // ,['easeBounceOut','easeBounceIn'] //震动\n            // , ['easeBackOut', 'easeBackIn'] //二段\n            , ['easeQuadraticActionOut', 'easeQuadraticActionIn']  //轻功\n            , ['easeQuarticActionOut', 'easeQuarticActionIn'] //滞空\n            // ,['easeQuinticActionOut','easeQuinticActionIn'] //悬空\n            // ,['easeCircleActionOut','easeCircleActionIn'] //和谐\n        ];\n\n        return r === 'key' ? styleKeys : styleValues;\n    },\n\n    readyJump() {\n        let readyTime = this.jumpDuration * 2 + this.squashDuration * 3;\n        if (this.firstJump) {\n            this.firstJump = false;\n            this.node.runAction(cc.sequence(\n                cc.scaleTo(readyTime, 1.2, 0.8),\n                cc.callFunc(() => {\n                    this.node.scale = 1;\n                    this.enabled = true;\n                    this.jumping();\n                })\n            ))\n        }else{\n            setTimeout(() => {\n                if(this.enabled){\n                    this.jumping();\n                }\n            }, readyTime * 1000);\n        }\n    },\n    jumping() {\n        console.log(\"Player-jumping\")\n        let jumpStyles = this.jumpStyles\n            , jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc[jumpStyles[this.jumpStyleIndex][0]]())\n            , jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc[jumpStyles[this.jumpStyleIndex][1]]())\n            , squash = cc.scaleTo(this.squashDuration, 1, 0.6)\n            , stretch = cc.scaleTo(this.squashDuration, 1, 1.2)\n            , scaleBack = cc.scaleTo(this.squashDuration, 1, 1)\n            , callback = cc.callFunc(this.playJumpSound, this);\n\n        this.node.runAction(cc.repeat(cc.sequence(squash, stretch, jumpUp, scaleBack, jumpDown, callback), 1));\n\n        if (this.enabled) {\n            let _main = this.node.parent.getComponent('Main');\n            if (_main.twiceJumpGetScore === 0) {\n                _main.scoreKeeper = Math.ceil(_main.scoreKeeper * 4 / 5);\n            } else {\n                _main.twiceJumpGetScore--;\n            }\n            this.readyJump();\n        }\n    },\n\n    playJumpSound() {\n        AudioManager.instance.play(\"jump\");\n    },\n    stopMove() {\n        this.enabled = false;\n        this.node.stopAllActions();\n        clearInterval(this.jumpInterval);\n    },\n\n    onKeyDown(event) {\n        switch (event.keyCode) {\n            case cc.macro.KEY.w:\n                this.switchJumpStyle();\n                break;\n            case cc.macro.KEY.s:\n                this.turnXSpeed();\n                break;\n            case cc.macro.KEY.a:\n                this.speedBounce();\n                break;\n        }\n    },\n\n    turnAcc() {\n        if (this.accDir === 0) {\n            this.accDir = 1;\n        } else {\n            this.accDir = 0;\n        }\n    },\n\n    turnXSpeed() {\n        if (this.canTurn && this.enabled) {\n            this.canTurn = false;\n            setTimeout(() => {\n                this.canTurn = true;\n            }, 100);\n            this.xSpeed *= -0.6;\n            this.node.runAction(\n                cc.sequence(cc.rotateBy(1, this.accDir === 0 ? 360 : -360),\n                    cc.callFunc(() => {\n                        this.node.rotation = 0;\n                    })\n                ));\n            this.turnAcc();\n        }\n    },\n    speedBounce() {\n        if (!this.enabled) return;\n        this.xSpeed /= 3;\n        this.node.runAction(cc.sequence(\n            cc.scaleTo(1, 0.5),\n            cc.callFunc(() => {\n                this.xSpeed *= 20;\n                this.node.scale = 1;\n            })\n        ));\n    },\n\n    switchJumpStyle() {\n        if (!this.enabled) return;\n        if (this.jumpStyleIndex === this.jumpStylesLength - 1) {\n            this.jumpStyleIndex = 0;\n        } else {\n            this.jumpStyleIndex++;\n        }\n        let jumpStyles = this.getJumpStyles('key');\n        this.jumpStyleDisplay.string = '跳法：' + jumpStyles[this.jumpStyleIndex];\n        AudioManager.instance.play(\"switchJump\");\n    },\n\n    onDestroy() {\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n    },\n\n    update(dt) {\n        this.xSpeed += (this.accDir === 0 ? -1 : 1) * this.accel * dt;\n        if (Math.abs(this.xSpeed) > this.maxXSpeed) {\n            this.xSpeed = (this.xSpeed > 0 ? 1 : -1) * this.maxXSpeed;\n        }\n\n        this.node.x += this.xSpeed * dt;\n        this.node.opacity = 150 + Math.floor((1 - Main.instance.timer / Main.instance.starsDuration) * 105);\n        if (this.node.x > this.node.parent.width / 2) {\n            this.node.x = this.node.parent.width / 2;\n            this.turnXSpeed();\n        } else if (this.node.x < -this.node.parent.width / 2) {\n            this.node.x = -this.node.parent.width / 2;\n            this.turnXSpeed();\n        }\n    },\n});\n\n\n"]}