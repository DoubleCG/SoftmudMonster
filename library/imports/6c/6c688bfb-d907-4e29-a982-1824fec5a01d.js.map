{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Player.js"],"names":["UserDataManager","require","cc","Class","extends","Component","properties","controller","default","type","Node","mobileController","money","Label","jumpAudio","AudioClip","jumpActionArray","switchJumpStyleAudio","jumpInterval","jumpStyleIndex","jumpStyles","jumpStylesLength","jumpStyleDisplay","onLoad","enabled","minPosX","node","parent","width","maxPosX","getJumpStyles","length","initInput","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","document","body","clientWidth","active","startMoveAt","x","y","roleArg","getRoleArg","canTurn","xSpeed","accDir","Math","random","initAttr","readyJump","setPosition","height","jumpHeight","rotation","jumpDuration","accel","squashDuration","maxMoveSpeed","rise_jumpHeight","rise_jumpDuration","rise_accel","upgrade","r","styleKeys","styleValues","jumping","jumpUp","moveBy","v2","easing","jumpDown","squash","scaleTo","stretch","scaleBack","callback","callFunc","playJumpSound","runAction","repeat","sequence","game","getComponent","twiceJumpGetScore","scoreKeeper","ceil","t","setTimeout","audioEngine","playEffect","stopMove","stopAllActions","clearInterval","event","keyCode","macro","KEY","w","switchJumpStyle","s","turnXSpeed","a","speedBounce","onTouchStart","touchLoc","getLocation","winSize","turnAcc","rotateBy","reverseXSpeed","scale","changeJumpStyle","string","onDestroy","off","update","dt","abs"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["let UserDataManager = require(\"UserDataManager\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        controller: {\n            default: null,\n            type: cc.Node\n        },\n        mobileController: {\n            default: null,\n            type: cc.Node\n        },\n        money: {\n            default: null,\n            type: cc.Label\n        },\n\n\n        jumpAudio: {\n            default: null,\n            type: cc.AudioClip\n        },\n        jumpActionArray: [],\n        switchJumpStyleAudio: {\n            default: null,\n            type: cc.AudioClip\n        },\n        jumpInterval: null,\n        jumpStyleIndex: 0,\n\n        jumpStyles: null,\n        jumpStylesLength: 0,\n        jumpStyleDisplay: {\n            default: null,\n            type: cc.Label\n        },\n\n    },\n\n    onLoad() {\n        this.enabled = false;\n        this.minPosX = -this.node.parent.width / 2;\n        this.maxPosX = this.node.parent.width / 2;\n\n        this.jumpStyles = this.getJumpStyles();\n        this.jumpStylesLength = this.jumpStyles.length;\n\n        this.initInput();\n    },\n\n    initInput() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n\n        if (document.body.clientWidth < 960) {\n            this.mobileController.active = true;\n        } else {\n            this.mobileController.active = false;\n        }\n    },\n    startMoveAt(x, y) {\n        this.roleArg = UserDataManager.getRoleArg();\n        this.canTurn = true;\n        this.enabled = true;\n        this.xSpeed = 0;\n        this.accDir = Math.random() > 0.5 ? 0 : 1;\n        this.initAttr();\n        this.readyJump();\n        this.node.setPosition(x, y + this.node.height / 2);\n    },\n    initAttr() {\n        this.jumpHeight = 110; // 主角跳跃高度\n        this.node.rotation = 0;\n\n        this.jumpDuration = 0.25 + this.roleArg.jumpDuration / 200;  // 主角跳跃持续时间\n        this.accel = 350 + this.roleArg.accel * 5; // 加速度\n\n        this.squashDuration = 0.03; // 辅助形变动作时间\n        this.maxMoveSpeed = 3000; // 最大移动速度\n\n        this.rise_jumpHeight = 0.7;\n        this.rise_jumpDuration = 0.0005;\n        this.rise_accel = 2.5;\n    },\n    upgrade() {\n        this.jumpHeight += (this.rise_jumpHeight);\n        this.jumpDuration += this.rise_jumpDuration * (10 + this.roleArg.jumpDuration) / 30;\n        this.accel += this.rise_accel * (10 + this.roleArg.accel) / 30;\n    },\n\n    getJumpStyles: function (r) {\n\n        let styleKeys = [\n            // '起跳'\n            '正常',\n            '漂浮',\n            // '弹簧',\n            // '震动',\n            '二段',\n            '轻功',\n            '滞空'\n            // '悬空',\n            // '和谐',\n\n        ];\n        let styleValues = [\n            // ['easeExponentialOut','easeExponentialIn'] //起跳\n            ['easeCubicActionOut', 'easeCubicActionIn']  //正常\n            , ['easeSineOut', 'easeSineIn'] //漂浮\n            // ,['easeElasticOut','easeElasticIn'] //弹簧\n            // ,['easeBounceOut','easeBounceIn'] //震动\n            , ['easeBackOut', 'easeBackIn'] //二段\n            , ['easeQuadraticActionOut', 'easeQuadraticActionIn']  //轻功\n            , ['easeQuarticActionOut', 'easeQuarticActionIn'] //滞空\n            // ,['easeQuinticActionOut','easeQuinticActionIn'] //悬空\n            // ,['easeCircleActionOut','easeCircleActionIn'] //和谐\n        ];\n\n        return r === 'key' ? styleKeys : styleValues;\n    },\n\n    jumping() {\n\n        let jumpStyles = this.jumpStyles\n            , jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc[jumpStyles[this.jumpStyleIndex][0]]())\n            , jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc[jumpStyles[this.jumpStyleIndex][1]]())\n            , squash = cc.scaleTo(this.squashDuration, 1, 0.6)\n            , stretch = cc.scaleTo(this.squashDuration, 1, 1.2)\n            , scaleBack = cc.scaleTo(this.squashDuration, 1, 1)\n            , callback = cc.callFunc(this.playJumpSound, this);\n\n        this.node.runAction(cc.repeat(cc.sequence(squash, stretch, jumpUp, scaleBack, jumpDown, callback), 1));\n\n        if (this.enabled) {\n            let game = this.node.parent.getComponent('Game');\n            if (game.twiceJumpGetScore === 0) {\n                game.scoreKeeper = Math.ceil(game.scoreKeeper * 4 / 5);\n            } else {\n                game.twiceJumpGetScore--;\n            }\n            this.readyJump();\n        }\n    },\n\n    readyJump() {\n        let t = this;\n        setTimeout(() => {\n            if (t.enabled) t.jumping();\n        }, t.jumpDuration * 2000 + t.squashDuration * 3000);\n    },\n\n    playJumpSound() {\n        cc.audioEngine.playEffect(this.jumpAudio, false);\n    },\n    stopMove() {\n        this.enabled = false;\n        this.node.stopAllActions();\n        clearInterval(this.jumpInterval);\n    },\n\n    onKeyDown(event) {\n        switch (event.keyCode) {\n            case cc.macro.KEY.w:\n                this.switchJumpStyle();\n                break;\n            case cc.macro.KEY.s:\n                this.turnXSpeed();\n                break;\n            case cc.macro.KEY.a:\n                this.speedBounce();\n                break;\n        }\n    },\n\n    onTouchStart(event) {\n        var touchLoc = event.getLocation();\n        if (touchLoc.y > cc.winSize.height * 0.6) {\n            this.switchJumpStyle();\n        } else {\n            if (touchLoc.x < cc.winSize.width / 3) {\n                this.accDir = 0;\n            } else if (touchLoc.x > cc.winSize.width * 2 / 3) {\n                this.accDir = 1;\n            } else {\n                this.turnXSpeed();\n            }\n        }\n    },\n\n    turnAcc() {\n        if (this.accDir === 0) {\n            this.accDir = 1;\n        } else {\n            this.accDir = 0;\n        }\n    },\n\n    turnXSpeed() {\n        if (this.canTurn) {\n            this.xSpeed /= -1.4;\n            this.node.runAction(\n                cc.sequence(cc.rotateBy(0.3, this.accDir === 0 ? 360 : -360),\n                    cc.callFunc(() => {\n                        this.node.rotation = 0;\n                    })\n                ));\n            this.turnAcc();\n        }\n    },\n    reverseXSpeed() {\n        this.turnXSpeed();\n        this.canTurn = false;\n        setTimeout(() => {\n            this.canTurn = true;\n        }, 100);\n    },\n    speedBounce() {\n        this.xSpeed /= 2;\n        this.node.runAction(cc.sequence(\n            cc.scaleTo(1, 0.7),\n            cc.callFunc(() => {\n                this.xSpeed *= 3;\n                this.node.scale = 1;\n            })\n        ));\n    },\n\n\n    switchJumpStyle: function () {\n        if (this.jumpStyleIndex === this.jumpStylesLength - 1) {\n            this.jumpStyleIndex = 0;\n        } else {\n            this.jumpStyleIndex++;\n        }\n        this.changeJumpStyle();\n    },\n\n    changeJumpStyle: function () {\n        let jumpStyles = this.getJumpStyles('key');\n        this.jumpStyleDisplay.string = '跳法：' + jumpStyles[this.jumpStyleIndex];\n        cc.audioEngine.playEffect(this.switchJumpStyleAudio, false);\n    },\n\n    onDestroy() {\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n    },\n\n    update(dt) {\n        if (this.accDir) {\n            this.xSpeed += this.accel * dt;\n        } else {\n            this.xSpeed -= this.accel * dt;\n        }\n        if (Math.abs(this.xSpeed) > this.maxMoveSpeed) {\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);\n        }\n\n        this.node.x += this.xSpeed * dt;\n        if (this.node.x > this.node.parent.width / 2) {\n            this.node.x = this.node.parent.width / 2;\n            this.reverseXSpeed();\n        } else if (this.node.x < -this.node.parent.width / 2) {\n            this.node.x = -this.node.parent.width / 2;\n            this.reverseXSpeed();\n        }\n    },\n});\n\n\n"]}